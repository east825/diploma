%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\chapter{Тестирование}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Модульное тестирование}
\label{sec:unit-testing}
Модульное тестирование прототипа осуществлялось при помощи библиотеки pytest.
Тесты включают в себя разрешение имен, вывод пользовательских типов для
параметров и типов из стандартной библиотеки, форматирование и подсчет
статистических данных, а также работоспособность различных вспомогательных
функций, использовавшихся в проекте --- всего 24 теста. 

\section{Анализ открытых проектов}
\label{sec:projects-analysis}

Примеры статистики для нескольких проанализированных проектов приведены в
таблице~\ref{tab:statistic-results-1}

\begin{table}[H]
  \scriptsize
  \caption{Результаты анализа нескольких открытых проектов.}
  \label{tab:statistic-results-1}
  \begin{tabularx}{\textwidth}{ |X|X|X|X|X|X| }
    \hline
    Проект & Общее число классов/функций/параметров & Параметры без атрибутов &
    Параметры с атрибутами, но без выведенного типа & 
    Параметры с одним выведенным типом & 
    Параметры с несколькими выведенными типами \\ \hline

    Flask & 106/961/615 & 502 (81.63\%) & 7 (1.14\%) & 32 (5.20\%) & 74 (12.03\%)
    \\ \hline

    Django & 1696/7494/9530 & 7415 (77.81\%) & 186 (1.95\%) & 539 (5.66\%) &
    1390 (14.59\%)
    \\ \hline

    requests & 121/643/661 & 536 (81.09\%) & 11 (1.66\%) & 18 (2.72\%) & 96
    (14.52\%)
    \\ \hline

    youtube-dl & 420/1071/1201 & 1003 (83.51\%) & 12 (1.00\%) & 14 (1.17\%)
    & 172 (14.32\%)
    \\ \hline

    fn.py & 42/327/242 &  224 (92.56\%) & 2 (0.83\%) & 9 (3.37\%) & 7
    (2.89\%)
    \\ \hline

  \end{tabularx}
\end{table}

Также для сбора более репрезентативной статистики такой анализ был запущен на 63
случайных проектов, загруженных с Github. Результаты приведены в
таблице~\ref{tab:statistics-results-2}

\begin{table}[H]
  \scriptsize
  \caption{Результаты анализа выборки открытых проектов.}
  \label{tab:statistics-results-2}
  \begin{tabularx}{\textwidth}{ |X|X|X| }
    \hline
    Метрика & Среднее значение & Дисперсия \\ \hline
    Доля параметров без атрибутов & 0.807 & 0.006 \\ \hline
    Доля параметров с атрибутами, но без выведенного типа & 0.04 & 0.05 \\ \hline
    Доля параметров с одним выведенным типом & 0.051 & 0.001 \\ \hline
    Доля параметров с несколькими выведенными типами & 0.100 & 0.002 \\ \hline
    Максимальное число базовых классов при выводе & 4.121 & 5.470 \\ \hline
  \end{tabularx}
\end{table}

Как видно из приведенных результатов, доля параметров для которых находится по крайней
мере тип сравнительно высока (15\%).

\section{Точность вывода}
\label{sec:inference-precision}

\section{Быстродействие}
\label{sec:inference-performance}
